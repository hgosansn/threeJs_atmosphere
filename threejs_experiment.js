import*as THREE from"three";import{OrbitControls}from"three/examples/jsm/controls/OrbitControls";import{Shader1}from"./fragment1.js";import{GlowShader}from"./glowShader.js";var projectBaseUrl="threeJs_atmosphere/",canvasId="background",rotationMap={x:85,y:-163,z:20};const distanceFromCamera=20;function resizeCanvasToDisplaySize(e,a){const t=e.domElement,r=t.clientWidth,n=t.clientHeight;t.width===r&&t.height===n||(e.setSize(r,n,!1),a.aspect=r/n,a.updateProjectionMatrix())}export const loadAnimation=()=>{document.body.scrollTop=0;const e=new THREE.Scene;var a=document.getElementById(canvasId);if(!a)return void console.error("Exit 0 - getElementById - #"+canvasId);var t=new THREE.PerspectiveCamera(75,2,.1,1e3),r=new THREE.WebGLRenderer({canvas:a,antialias:!0,alpha:!0});r.setSize(a.innerWidth,a.innerHeight);const n=new OrbitControls(t,a);n.target.set(0,1,0),n.enableDamping=!0;const o=new THREE.GridHelper(100,10);e.add(o),o.position.set(0,-5,0);var i=(new THREE.TextureLoader).load(projectBaseUrl+"assets/blackearth.jpg");const s=new THREE.Mesh(new THREE.SphereGeometry(10,50,50),new THREE.ShaderMaterial({uniforms:{globeTexture:{value:i,scale:{type:"f",value:1.2}}},vertexShader:Shader1.vertexShader,fragmentShader:Shader1.fragmentShader})),d=new THREE.ShaderMaterial({vertexShader:GlowShader.vertexShader,fragmentShader:GlowShader.fragmentShader,uniforms:{[GlowShader.params.intensity]:{value:.8}},blending:THREE.AdditiveBlending,side:THREE.BackSide}),l=new THREE.Mesh(new THREE.SphereGeometry(10,50,50),d);l.scale.set(1.1,1.1,1.1),e.add(s),e.add(l),Object.keys(rotationMap).forEach((e=>s.rotation[e]=rotationMap[e]/90)),t.position.z=20;(new Date).getTime();const m=function(a){a*=.001;a;const n=l.position.distanceTo(t.position);d.uniforms[GlowShader.params.intensity].value=Math.min(.8,Math.abs(1-n/40)),resizeCanvasToDisplaySize(r,t),r.render(e,t),requestAnimationFrame(m)};requestAnimationFrame(m)};